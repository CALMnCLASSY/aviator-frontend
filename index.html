<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AviSignals - Premium Prediction Service</title>
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional Aviator game predictions with high accuracy rates. Join thousands of satisfied clients.">
    <meta name="keywords" content="aviator predictions, aviator signals, casino predictions, aviator bot">
    <meta name="author" content="Aviator Signals">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Aviator Signals - Premium Prediction Service">
    <meta property="og:description" content="Professional Aviator game predictions with high accuracy rates. Join thousands of satisfied clients.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://avisignals.com">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.jpg?v=2025-08-31">
    <link rel="shortcut icon" href="favicon.jpg?v=2025-08-31" type="image/x-icon">
    <link rel="apple-touch-icon" href="favicon.jpg?v=2025-08-31">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            color: #333;
        }
        
        .container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .landing-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: white;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.2);
        }
        
        .landing-card h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .landing-card .subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .feature {
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }
        
        .feature i {
            font-size: 24px;
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .feature h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .feature p {
            font-size: 12px;
            color: #666;
        }
        
        .contact-form {
            margin-bottom: 25px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .proceed-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .proceed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .proceed-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .proceed-btn .loading {
            display: none;
        }
        
        .proceed-btn.loading .loading {
            display: inline-block;
            margin-right: 10px;
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .footer-text {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
        
        .security-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            margin-top: 15px;
        }
        
        @media (max-width: 768px) {
            .landing-card {
                padding: 30px 20px;
                margin: 10px;
            }
            
            .landing-card h1 {
                font-size: 28px;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .footer-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* WhatsApp Popup Styles */
        .whatsapp-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #25D366;
            color: white;
            padding: 15px 20px;
            border-radius: 25px;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
            cursor: pointer;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 14px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 200px;
        }
        
        .whatsapp-popup.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .whatsapp-popup:hover {
            background: #128C7E;
            transform: translateX(0) scale(1.05);
        }
        
        .whatsapp-popup .whatsapp-icon {
            font-size: 20px;
            animation: pulse 2s infinite;
        }
        
        .whatsapp-popup .close-btn {
            margin-left: auto;
            font-size: 16px;
            cursor: pointer;
            opacity: 0.8;
        }
        
        .whatsapp-popup .close-btn:hover {
            opacity: 1;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .whatsapp-popup {
                top: 10px;
                right: 10px;
                padding: 12px 16px;
                font-size: 13px;
                max-width: 180px;
            }
            
            .whatsapp-popup .whatsapp-icon {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="landing-card fade-in">
            <div class="logo pulse">
                <img src="AvSiteImg/logo.png" alt="AviSignals Logo" style="width: 100%; height: 100%; object-fit: contain; border-radius: 50%;">
            </div>
            
            <h1>AviSignals Aviator Predictions</h1>
            <p class="subtitle">Join thousands of satisfied clients with our premium prediction service. Get accurate signals and maximize your winnings.</p>
            
            <div class="features">
                <div class="feature">
                    <i class="fas fa-chart-line"></i>
                    <h3>High Accuracy</h3>
                    <p>98.72%+ success rate</p>
                </div>
                <div class="feature">
                    <i class="fas fa-clock"></i>
                    <h3>Real-Time</h3>
                    <p>Instant notifications</p>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Secure Platform</h3>
                    <p>Protected & verified</p>
                </div>
                <div class="feature">
                    <i class="fas fa-headset"></i>
                    <h3>24/7 Support</h3>
                    <p>Always here to help</p>
                </div>
            </div>
            
            <form class="contact-form" id="accessForm">
                <div class="form-group">
                    <label for="contactValue">Enter Phone Number or Email to Continue *</label>
                    <input type="text" id="contactValue" placeholder="Phone number or email address" required>
                </div>
                
                <button type="submit" class="proceed-btn" id="proceedBtn">
                    <i class="fas fa-spinner fa-spin loading"></i>
                    <i class="fas fa-rocket"></i>
                    Proceed to Secure AviSignals Platform 
                </button>
            </form>
            
            <div class="security-badge">
                <i class="fas fa-lock"></i>
                SSL Secured & Verified Platform
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-stats">
                <div class="stat">
                    <div class="stat-number">5,000+</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat">
                    <div class="stat-number">98%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Support Available</div>
                </div>
                <div class="stat">
                    <div class="stat-number">$2M+</div>
                    <div class="stat-label">Client Winnings</div>
                </div>
            </div>
            
            <div class="footer-text">
                <p><strong>AviSignals</strong> - Professional prediction service with proven results. Our advanced algorithms and expert analysis help you make informed decisions in the Aviator game. Compatible with all major betting platforms including 1win, Betika, SportyBet, 1xBet, Betway, and many more.</p>
                <p style="margin-top: 10px;"><small>© 2025 Aviator Signals. All rights reserved. Bet responsibly.</small></p>
            </div>
        </div>
    </footer>

    <script>
        // Backend API configuration
        const API_BASE_URL = 'https://aviator-backend-komp.onrender.com';
        
        // Form submission handler
        document.getElementById('accessForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const contactValue = document.getElementById('contactValue').value.trim();
            const proceedBtn = document.getElementById('proceedBtn');
            
            if (!contactValue) {
                alert('Please enter your phone number or email');
                return;
            }
            
            // Auto-detect if it's email or phone
            const contactType = isValidEmail(contactValue) ? 'email' : 'phone';
            
            // Validate input
            if (contactType === 'email' && !isValidEmail(contactValue)) {
                alert('Please enter a valid email address');
                return;
            }
            
            if (contactType === 'phone' && !isValidPhone(contactValue)) {
                alert('Please enter a valid phone number with country code (e.g., +1234567890)');
                return;
            }
            
            // Show loading state
            proceedBtn.disabled = true;
            proceedBtn.classList.add('loading');
            proceedBtn.innerHTML = '<i class="fas fa-spinner fa-spin loading"></i>Processing...';
            
            try {
                // Update Tawk.to with user contact data immediately
                if (typeof window.updateTawkWithUserData === 'function') {
                    window.updateTawkWithUserData(contactValue, contactType);
                }
                
                // Send contact info to Telegram
                await sendContactToTelegram(contactType, contactValue);
                
                // Store in session for main app
                sessionStorage.setItem('aviator_contact', contactValue);
                sessionStorage.setItem('aviator_contact_type', contactType);
                sessionStorage.setItem('aviator_verified', 'true');
                
                // Success feedback
                proceedBtn.innerHTML = '<i class="fas fa-check"></i>Redirecting to Platform...';
                
                // Redirect to main application in same folder
                setTimeout(() => {
                    window.location.href = 'main.html';
                }, 1500);
                
            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong. Please try again.');
                
                // Reset button
                proceedBtn.disabled = false;
                proceedBtn.classList.remove('loading');
                proceedBtn.innerHTML = '<i class="fas fa-rocket"></i>Proceed to Secure AviSignals Platform';
            }
        });
        
        // Send contact info via backend API
        async function sendContactToTelegram(contactType, contactValue) {
            try {
                const response = await fetch(`${API_BASE_URL}/api/users/index-login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contact: contactValue,
                        contactType: contactType,
                        userAgent: navigator.userAgent,
                        timestamp: new Date().toISOString()
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    console.log('✅ Index login logged:', result.message);
                    
                    // Store session data if provided
                    if (result.sessionData) {
                        sessionStorage.setItem('aviator_session_data', JSON.stringify(result.sessionData));
                        sessionStorage.setItem('aviator_login_time', result.sessionData.loginTime);
                        sessionStorage.setItem('aviator_session_expiry', result.sessionData.sessionExpiry);
                    }
                } else {
                    console.warn('⚠️ Index login warning:', result.message);
                }
                
            } catch (error) {
                console.error('❌ Index login error:', error);
                // Don't block the user flow if backend fails
            }
        }
        
        // Validation functions
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function isValidPhone(phone) {
            // Basic phone validation (should start with + and have 10-15 digits)
            const phoneRegex = /^\+[1-9]\d{9,14}$/;
            return phoneRegex.test(phone);
        }
        
        // Add some interactive effects
        document.addEventListener('DOMContentLoaded', function() {
            // Animate stats on scroll/load
            const stats = document.querySelectorAll('.stat-number');
            stats.forEach(stat => {
                const finalValue = stat.textContent;
                const isPercentage = finalValue.includes('%');
                const isMoney = finalValue.includes('$');
                const isPlus = finalValue.includes('+');
                
                let numericValue = parseInt(finalValue.replace(/[^\d]/g, ''));
                let currentValue = 0;
                const increment = numericValue / 50;
                
                const timer = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= numericValue) {
                        currentValue = numericValue;
                        clearInterval(timer);
                    }
                    
                    let displayValue = Math.floor(currentValue);
                    if (isMoney) displayValue = '$' + displayValue + (isPlus && currentValue >= numericValue ? 'M+' : 'M');
                    else if (isPercentage) displayValue = displayValue + '%';
                    else if (isPlus) displayValue = displayValue.toLocaleString() + '+';
                    else displayValue = displayValue.toLocaleString();
                    
                    stat.textContent = displayValue;
                }, 30);
            });
        });
    </script>
    
    <!-- WhatsApp Popup -->
    <div id="whatsappPopup" class="whatsapp-popup">
        <i class="fab fa-whatsapp whatsapp-icon"></i>
        <span>Click to Talk to Agent</span>
        <span class="close-btn" onclick="closeWhatsAppPopup(event)">&times;</span>
    </div>
    
    <script>
        // WhatsApp Popup functionality
        let whatsappInterval;
        let popupClosed = false;
        const whatsappNumber = '447366184436';
        
        function showWhatsAppPopup() {
            if (popupClosed) return;
            
            const popup = document.getElementById('whatsappPopup');
            popup.classList.add('show');
            
            // Auto hide after 8 seconds
            setTimeout(() => {
                popup.classList.remove('show');
            }, 8000);
        }
        
        function closeWhatsAppPopup(event) {
            event.stopPropagation();
            const popup = document.getElementById('whatsappPopup');
            popup.classList.remove('show');
            popupClosed = true;
            
            // Clear the interval to stop showing popup
            if (whatsappInterval) {
                clearInterval(whatsappInterval);
            }
        }
        
        function openWhatsApp() {
            const message = encodeURIComponent("Hi! I need help with Aviator predictions. Can you assist me?");
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }
        
        // Initialize WhatsApp popup
        document.addEventListener('DOMContentLoaded', function() {
            const popup = document.getElementById('whatsappPopup');
            
            // Add click event to popup (excluding close button)
            popup.addEventListener('click', function(event) {
                if (!event.target.classList.contains('close-btn')) {
                    openWhatsApp();
                }
            });
            
            // Show popup every 15 seconds
            setTimeout(() => {
                showWhatsAppPopup();
                whatsappInterval = setInterval(showWhatsAppPopup, 15000);
            }, 3000); // Initial delay of 3 seconds
        });
    </script>
    
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
        var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
        
        // Enhanced Tawk.to configuration for landing page
        Tawk_API.onLoad = function(){
            console.log('✅ Tawk.to chat widget loaded successfully on landing page');
            
            // Set initial landing page context
            try {
                Tawk_API.setAttributes({
                    'site_section': 'landing_page',
                    'page_type': 'index_entry',
                    'user_status': 'potential_customer'
                });
                console.log('🔄 Tawk.to initialized with landing page context');
            } catch (error) {
                console.warn('Failed to set initial Tawk.to attributes:', error);
            }
        };
        
        // Function to update Tawk.to when user enters contact info
        window.updateTawkWithUserData = function(contactValue, contactType) {
            if (typeof Tawk_API !== 'undefined' && contactValue) {
                try {
                    const attributes = {
                        'site_section': 'landing_page',
                        'user_status': 'provided_contact',
                        'contact_type': contactType,
                        'registration_time': new Date().toISOString()
                    };
                    
                    if (contactType === 'email') {
                        attributes.email = contactValue;
                        attributes.name = contactValue.split('@')[0];
                    } else {
                        attributes.phone = contactValue;
                        attributes.name = `User_${contactValue.slice(-4)}`;
                    }
                    
                    Tawk_API.setAttributes(attributes);
                    console.log('🔄 Tawk.to updated with user contact data:', attributes);
                } catch (error) {
                    console.warn('Failed to update Tawk.to with user data:', error);
                }
            }
        };
        
        // Handle offline scenarios
        Tawk_API.onOfflineMessage = function(data){
            console.log('📧 Tawk.to offline message from landing page:', data);
        };
        
        Tawk_API.onChatStarted = function(){
            console.log('💬 Chat started on landing page');
        };
        
        (function(){
            try {
                var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
                s1.async=true;
                s1.src='https://embed.tawk.to/68a240334ebc491927e09906/1j2ssljfv';
                s1.charset='UTF-8';
                s1.setAttribute('crossorigin','*');
                
                // Error handling for script loading
                s1.onerror = function() {
                    console.warn('⚠️ Tawk.to chat widget failed to load. Please check your internet connection.');
                };
                
                s0.parentNode.insertBefore(s1,s0);
            } catch (error) {
                console.warn('Error loading Tawk.to widget:', error);
            }
        })();
    </script>
    <!--End of Tawk.to Script-->
</body>
</html>
